<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mont Beer - Card√°pio Digital</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root {
            --header-orange: #c04828;
            --bg-dark: #2A1208;
            --card-bg: #3A1B0F;
            --highlight: #FFC857;
            --text-light: #F5F5F5;
            --action-green: #2ECC71;
            --error-red: #e74c3c;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Segoe UI', sans-serif; }
        body { background-color: var(--bg-dark); color: var(--text-light); padding-bottom: 100px; }

        header { 
            background: var(--header-orange); 
            padding: 30px 10px; 
            text-align: center; 
            border-bottom: 4px solid var(--highlight); 
        }

        .logo-img { max-width: 100%; height: auto; max-height: 110px; display: block; margin: 0 auto; }

        .tabs-container { background: var(--card-bg); position: sticky; top: 0; z-index: 10; box-shadow: 0 4px 15px rgba(0,0,0,0.5); }
        .tabs { display: flex; overflow-x: auto; scrollbar-width: none; }
        .tab-btn { flex: 1; min-width: 100px; padding: 15px; border: none; background: none; font-weight: bold; cursor: pointer; color: #7d635a; border-bottom: 3px solid transparent; text-transform: uppercase; font-size: 0.8rem; }
        .tab-btn.active { color: var(--highlight); border-bottom-color: var(--highlight); }

        .container { padding: 15px; max-width: 800px; margin: auto; }
        .category-section { display: none; }
        .category-section.active { display: block; }
        
        .product-card {
            background: var(--card-bg); border-radius: 15px; padding: 12px;
            margin-bottom: 15px; display: flex; align-items: center; 
            border: 1px solid rgba(255, 200, 87, 0.1);
        }

        .product-info { flex: 1; padding-right: 10px; }
        .product-info h3 { font-size: 1.1rem; color: var(--highlight); margin-bottom: 4px; }
        .product-info p { font-size: 0.85rem; color: #bcaea6; margin-bottom: 8px; }
        .product-price { color: var(--action-green); font-weight: 800; font-size: 1.2rem; }
        .product-img { width: 85px; height: 85px; border-radius: 12px; object-fit: cover; margin-right: 12px; }

        .add-btn { 
            background: var(--action-green); border: none; padding: 10px 15px;
            border-radius: 10px; cursor: pointer; font-weight: 900; color: #0d2b18;
        }

        /* Footer Carrinho */
        .cart-footer {
            position: fixed; bottom: 0; width: 100%; background: var(--header-orange);
            color: var(--text-light); padding: 18px 25px; display: flex; 
            justify-content: space-between; align-items: center; z-index: 99;
            cursor: pointer;
        }

        .cart-icon-wrapper { position: relative; }
        .cart-badge {
            position: absolute; top: -10px; right: -12px;
            background: var(--highlight); color: #000;
            font-size: 0.7rem; font-weight: bold;
            width: 18px; height: 18px; border-radius: 50%;
            display: flex; align-items: center; justify-content: center;
            border: 2px solid var(--header-orange);
        }

        /* Modal */
        .modal { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); display: none; justify-content: center; align-items: flex-start; z-index: 1000; overflow-y: auto; padding: 20px 10px; }
        .modal-content { background: #fff; color: #333; padding: 20px; border-radius: 15px; width: 100%; max-width: 450px; margin-top: 20px; }
        
        .cart-item { display: flex; justify-content: space-between; align-items: center; padding: 10px 0; border-bottom: 1px solid #eee; }
        .qty-controls { display: flex; align-items: center; gap: 10px; }
        .qty-btn { background: #eee; border: none; width: 25px; height: 25px; border-radius: 5px; cursor: pointer; font-weight: bold; }

        .form-group { margin-top: 15px; }
        label { display: block; font-size: 0.85rem; font-weight: bold; margin-bottom: 5px; color: #555; }
        input, select, textarea { width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 8px; font-size: 1rem; }
        
        #address-container, #change-container { display: none; margin-top: 10px; }

        .btn-send { background: var(--action-green); color: white; border: none; width: 100%; padding: 15px; font-weight: bold; border-radius: 8px; margin-top: 20px; cursor: pointer; font-size: 1rem; }
        .btn-send:disabled { background: #ccc; cursor: not-allowed; }
        .btn-close { background: #f2f2f2; color: #666; border: none; width: 100%; padding: 10px; margin-top: 10px; border-radius: 8px; cursor: pointer; }
        
        #store-closed-msg { 
            display: none; 
            background: #ffebee; 
            color: var(--error-red); 
            font-weight: bold; 
            text-align: center; 
            padding: 10px; 
            border-radius: 8px; 
            margin-top: 15px;
            font-size: 0.9rem;
        }
    </style>
</head>
<body>

<header>
    <img src="Gemini_Generated_Image_7jp7im7jp7im7jp7 (1).png" alt="Mont Beer" class="logo-img">
</header>

<div class="tabs-container">
    <div class="tabs">
        <button class="tab-btn active" onclick="showCategory('lanches')">Lanches</button>
        <button class="tab-btn" onclick="showCategory('porcoes')">Por√ß√µes</button>
        <button class="tab-btn" onclick="showCategory('marmitas')">Marmitas</button>
        <button class="tab-btn" onclick="showCategory('bebidas')">Bebidas</button>
    </div>
</div>

<div class="container" id="menu-container"></div>

<div class="cart-footer" onclick="toggleModal(true)">
    <div class="cart-icon-wrapper">
        <i class="fas fa-shopping-cart"></i>
        <div class="cart-badge" id="cart-badge-count">0</div>
    </div>
    <span id="cart-total-footer" style="font-weight: bold; color: var(--highlight);">R$ 0,00</span>
</div>

<div class="modal" id="orderModal">
    <div class="modal-content">
        <h2 style="color: var(--header-orange); border-bottom: 2px solid #eee; padding-bottom: 10px;">Meu Pedido</h2>
        
        <div id="cart-list-details" style="margin-bottom: 20px;"></div>

        <div style="background: #f9f9f9; padding: 12px; border-radius: 10px; margin-bottom: 20px;">
            <div style="display: flex; justify-content: space-between; font-size: 0.9rem;">
                <span>Subtotal:</span> <span id="subtotal-val">R$ 0,00</span>
            </div>
            <div style="display: flex; justify-content: space-between; font-size: 0.9rem;">
                <span>Taxa de Entrega:</span> <span id="taxa-val">R$ 0,00</span>
            </div>
            <div style="display: flex; justify-content: space-between; font-weight: bold; font-size: 1.1rem; margin-top: 5px;">
                <span>Total:</span> <span id="modal-total-value" style="color: var(--action-green);">R$ 0,00</span>
            </div>
        </div>

        <div class="form-group">
            <label>Nome do Cliente *</label>
            <input type="text" id="cust-name" placeholder="Como te chamamos?">
        </div>

        <div class="form-group">
            <label>Como deseja receber? *</label>
            <select id="order-type" onchange="handleOrderTypeChange()">
                <option value="Retirada">Retirada no Balc√£o (Gr√°tis)</option>
                <option value="Entrega">Entrega (Taxa R$ 5,00)</option>
            </select>
        </div>

        <div id="address-container" class="form-group">
            <label>Endere√ßo de Entrega *</label>
            <input type="text" id="cust-address" placeholder="Rua, n√∫mero e bairro">
        </div>

        <div class="form-group">
            <label>Forma de Pagamento *</label>
            <select id="cust-payment" onchange="handlePaymentChange()">
                <option value="Pix">Pix</option>
                <option value="Cart√£o">Cart√£o (Maquininha)</option>
                <option value="Dinheiro">Dinheiro</option>
            </select>
        </div>

        <div id="change-container">
            <label>Precisa de troco para quanto?</label>
            <input type="text" id="cust-change" placeholder="Ex: R$ 100,00">
        </div>

        <div class="form-group">
            <label>Observa√ß√µes (Opcional)</label>
            <textarea id="cust-obs" rows="2" placeholder="Ex: Sem cebola, trocar carne..."></textarea>
        </div>

        <div id="store-closed-msg">üõµ Loja Fechada! Abrimos das 08:00 √†s 23:00.</div>
        <button class="btn-send" id="finalizar-btn" onclick="sendWhatsApp()">FINALIZAR NO WHATSAPP</button>
        <button class="btn-close" onclick="toggleModal(false)">VOLTAR AO MENU</button>
    </div>
</div>

<script>
    const produtos = {
        lanches: [
            {n: "X-Burger Cl√°ssico", p: 18.0, d: "Carne 120g e queijo derretido.", i: "main-header.avif"},
            {n: "X-Salada Especial", p: 20.0, d: "Carne, queijo, alface, tomate e maionese.", i: "main-header.avif"},
            {n: "X-Bacon Crocante", p: 25.0, d: "Bacon crocante, carne 150g e queijo duplo.", i: "main-header.avif"},
            {n: "X-Egg", p: 22.0, d: "Ovo frito na chapa, carne 120g e queijo.", i: "main-header.avif"},
            {n: "X-Tudo Mont Beer", p: 32.0, d: "Hamb√∫rguer, ovo, bacon, queijo e salada.", i: "main-header.avif"}
        ],
        porcoes: [
            {n: "Fritas com Bacon", p: 28.0, d: "Com cheddar e bacon.", i: "Fritas com Bacon.webp"},
            {n: "Iscas de Frango", p: 40.0, d: "500g de frango empanado.", i: "Iscas de Frango.webp"},
            {n: "An√©is de Cebola", p: 22.0, d: "12 unidades.", i: "An√©is de Cebola.webp"}
        ],
        marmitas: [
            {n: "Marmita G", p: 22.0, d: "Arroz, feij√£o, carne e guarni√ß√£o.", i: "Marmita G.webp"},
            {n: "Strogonoff", p: 22.0, d: "Frango com molho especial e batata palha.", i: "Strogonoff.webp"}
        ],
        bebidas: [
            {n: "Coca-Cola Lata", p: 6.0, d: "350ml", i: "Coca-Cola Lata.webp"},
            {n: "Suco Natural", p: 10.0, d: "Laranja 500ml", i: "Suco Natural.jpg"},
            {n: "Heineken LN", p: 12.0, d: "Long Neck 330ml", i: "Heineken LN.webp"}
        ]
    };

    let cart = {};
    const ENTREGA_VALOR = 5.0;

    function renderMenu() {
        const container = document.getElementById('menu-container');
        container.innerHTML = "";
        for (let cat in produtos) {
            let section = document.createElement('div');
            section.id = cat;
            section.className = `category-section ${cat === 'lanches' ? 'active' : ''}`;
            produtos[cat].forEach(p => {
                section.innerHTML += `
                    <div class="product-card">
                        <img src="${p.i}" class="product-img" onerror="this.src='https://via.placeholder.com/85'">
                        <div class="product-info">
                            <h3>${p.n}</h3>
                            <p>${p.d}</p>
                            <span class="product-price">R$ ${p.p.toFixed(2).replace('.',',')}</span>
                        </div>
                        <button class="add-btn" onclick="updateCart('${p.n}', ${p.p}, 1)">ADD</button>
                    </div>
                `;
            });
            container.appendChild(section);
        }
    }

    // Fun√ß√£o silenciosa de checagem de hor√°rio
    function isStoreOpen() {
        const agora = new Date();
        const hora = agora.getHours();
        return (hora >= 8 && hora < 23);
    }

    function updateCart(name, price, change) {
        if (!cart[name]) cart[name] = { price: price, qnt: 0 };
        cart[name].qnt += change;
        if (cart[name].qnt <= 0) delete cart[name];
        
        let totalItens = 0;
        for(let n in cart) totalItens += cart[n].qnt;
        document.getElementById('cart-badge-count').innerText = totalItens;
        
        renderCartItems();
        updateTotal();
    }

    function renderCartItems() {
        const list = document.getElementById('cart-list-details');
        list.innerHTML = "";
        if (Object.keys(cart).length === 0) {
            list.innerHTML = "<p style='color:#999'>Seu carrinho est√° vazio.</p>";
            return;
        }
        for (let n in cart) {
            list.innerHTML += `
                <div class="cart-item">
                    <div><div style="font-weight:bold">${n}</div></div>
                    <div class="qty-controls">
                        <button class="qty-btn" onclick="updateCart('${n}', ${cart[n].price}, -1)">-</button>
                        <span>${cart[n].qnt}</span>
                        <button class="qty-btn" onclick="updateCart('${n}', ${cart[n].price}, 1)">+</button>
                    </div>
                </div>
            `;
        }
    }

    function updateTotal() {
        let subtotal = 0;
        for (let n in cart) subtotal += cart[n].price * cart[n].qnt;
        const taxa = (document.getElementById('order-type').value === "Entrega") ? ENTREGA_VALOR : 0;
        const totalFinal = subtotal + taxa;

        document.getElementById('subtotal-val').innerText = `R$ ${subtotal.toFixed(2).replace('.',',')}`;
        document.getElementById('taxa-val').innerText = `R$ ${taxa.toFixed(2).replace('.',',')}`;
        document.getElementById('modal-total-value').innerText = `R$ ${totalFinal.toFixed(2).replace('.',',')}`;
        document.getElementById('cart-total-footer').innerText = `R$ ${totalFinal.toFixed(2).replace('.',',')}`;
    }

    function handleOrderTypeChange() {
        document.getElementById('address-container').style.display = (document.getElementById('order-type').value === "Entrega") ? "block" : "none";
        updateTotal();
    }

    function handlePaymentChange() {
        document.getElementById('change-container').style.display = (document.getElementById('cust-payment').value === "Dinheiro") ? "block" : "none";
    }

    function showCategory(id) {
        document.querySelectorAll('.category-section').forEach(s => s.classList.remove('active'));
        document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
        document.getElementById(id).classList.add('active');
        event.currentTarget.classList.add('active');
    }

    function toggleModal(show) {
        if (show && Object.keys(cart).length === 0) return alert("Seu carrinho est√° vazio!");
        document.getElementById('orderModal').style.display = show ? 'flex' : 'none';
        
        // Valida hor√°rio na abertura do carrinho
        const aberto = isStoreOpen();
        document.getElementById('finalizar-btn').disabled = !aberto;
        document.getElementById('store-closed-msg').style.display = aberto ? "none" : "block";
    }

    function sendWhatsApp() {
        if(!isStoreOpen()) return alert("Desculpe, a loja j√° fechou!");
        
        const name = document.getElementById('cust-name').value;
        const type = document.getElementById('order-type').value;
        const addr = document.getElementById('cust-address').value;
        const pay = document.getElementById('cust-payment').value;
        const change = document.getElementById('cust-change').value;
        const obs = document.getElementById('cust-obs').value;

        if (!name) return alert("Informe seu nome.");
        if (type === "Entrega" && !addr) return alert("Informe o endere√ßo.");

        let msg = `*PEDIDO MONT BEER*\n\n`;
        msg += `*Cliente:* ${name}\n*Tipo:* ${type}\n`;
        if(type === "Entrega") msg += `*Endere√ßo:* ${addr}\n`;
        msg += `*Pagamento:* ${pay}\n`;
        if(pay === "Dinheiro" && change) msg += `*Troco para:* ${change}\n`;
        if(obs) msg += `*Obs:* ${obs}\n\n*ITENS:*\n`;

        for (let n in cart) msg += `‚Ä¢ ${cart[n].qnt}x ${n}\n`;

        msg += `\n*TAXA:* ${document.getElementById('taxa-val').innerText}`;
        msg += `\n*TOTAL:* ${document.getElementById('modal-total-value').innerText}`;

        window.open(`https://wa.me/5535997814774?text=${encodeURIComponent(msg)}`);
    }

    renderMenu();
</script>
</body>
</html>